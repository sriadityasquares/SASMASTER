@model ModelLayer.Dashboard
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

 @*<style>
        .seatSelection {
            text-align: center;
            padding: 5px;
            margin: 15px;
        }

        .seatsReceipt {
            text-align: center;
        }

        .seatNumber {
            display: inline;
            padding: 10px;
            background: linear-gradient(to top, #761818, #761818, #761818, #761818, #761818, #B54041, #F3686A);
            color: black;
            border-radius: 5px;
            width: 35px;
            height: 50px;
            border-radius: 7px;
            line-height: 25px;
            margin-bottom: 10px;
            margin-top: -32px;
            transform: skew(20deg);
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .seatRow {
            padding: 10px;
        }

        .seatSelected {
            background-color: lightgreen;
            color: black;
        }

        .seatUnavailable {
            background-color: gray;
        }

        .seatRowNumber {
            clear: none;
            display: inline;
        }

        .hidden {
            display: none;
        }

        .seatsAmount {
            max-width: 2em;
        }
 </style>*@
<style>

    .theatre {
        display: flex;
        position: absolute;
        top: 70%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .cinema-seats {
        display: flex;
    }

        .cinema-seats .seat {
            cursor: pointer;
        }

            .cinema-seats .seat:hover:before {
                content: '';
                position: absolute;
                top: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                border-radius: 7px;
            }

            .cinema-seats .seat.active:before {
                content: '';
                position: absolute;
                top: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 255, 255, 0.6);
                border-radius: 7px;
            }

    .left .cinema-row {
        /*transform: skew(-15deg);*/
        /*margin: 0 6px;
        padding-left: 50px;*/
        margin: 60px 30px 60px 30px;
        
    }

    .left .seat {
        width: 35px;
        height: 50px;
        border-radius: 7px;
        background: linear-gradient(to top, #761818, #761818, #761818, #761818, #761818, #B54041, #F3686A);
        margin: 0px 0px 0px 0px;
        /*transform: skew(20deg);
        margin-top: -32px;*/
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    }

    .left .row-1 {
        transform: rotate(-90deg);
        margin-top: 240px;
        margin-right:30px;
    }

    .left .row-1 .seat {
            transform: rotate(90deg);
        }

    .left .row-2 {
        transform: rotate(-90deg);
        margin-top: 120px;
        margin-right:30px;
    }

        .left .row-2 .seat {
            transform: rotate(90deg);
        }

    .left .row-3 {
        transform: rotate(-90deg);
        margin-top: 0px;
        margin-right:45px;
    }

        .left .row-3 .seat {
            transform: rotate(90deg);
        }

    .left .row-4 {
        transform: rotate(-90deg);
        margin-top: -120px;
        margin-right:-30px;
    }

        .left .row-4 .seat {
            transform: rotate(90deg);
        }

    .left .row-5 {
        transform: rotate(-90deg);
        margin-top: -240px;
        margin-right:-30px;
    }

        .left .row-5 .seat {
            transform:rotate(90deg);
        }

    .left .row-6 {
        transform: rotate(-90deg);
        margin-top: -360px;
    }

        .left .row-6 .seat {
            transform: rotate(90deg);
        }

    .left .row-7 {
        transform: rotate(-90deg);
        margin-top: -480px;
    }

        .left .row-7 .seat {
            transform: rotate(90deg);
        }

    .left .row-8 {
        transform: rotate(-90deg);
        margin-top: -600px;
    }

        .left .row-8 .seat {
            transform: rotate(90deg);
        }

    .left .row-9 {
        transform: rotate(-90deg);
        margin-top: -720px;
    }

        .left .row-9 .seat {
            transform: rotate(90deg);
        }

    .left .row-10 {
        transform: rotate(-90deg);
        margin-top: -840px;
    }

        .left .row-10 .seat {
            transform: rotate(90deg);
        }

    .right {
        margin-left: 70px;
    }

        .right .cinema-row {
            transform: skew(7deg);
            margin: 0 6px;
        }

        .right .seat {
            width: 35px;
            height: 50px;
            border-radius: 7px;
            background: linear-gradient(to top, #761818, #761818, #761818, #761818, #761818, #B54041, #F3686A);
            margin-bottom: 10px;
            transform: skew(-8deg);
            margin-top: -32px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .right .row-2 {
            transform: skew(9deg);
        }

            .right .row-2 .seat {
                transform: skew(-10deg);
            }

        .right .row-3 {
            transform: skew(10deg);
        }

            .right .row-3 .seat {
                transform: skew(-12deg);
            }

        .right .row-4 {
            transform: skew(11deg);
        }

            .right .row-4 .seat {
                transform: skew(-15deg);
            }

        .right .row-5 {
            transform: skew(12deg);
        }

            .right .row-5 .seat {
                transform: skew(-16deg);
            }

        .right .row-6 {
            transform: skew(13deg);
        }

            .right .row-6 .seat {
                transform: skew(-18deg);
            }

        .right .row-7 {
            transform: skew(15deg);
        }

            .right .row-7 .seat {
                transform: skew(-20deg);
            }

    .seat label {
        display: block;
        position: relative;
        width: 25%;
        text-align: center;
        font-size: 14px;
        font-weight: bold;
        line-height: 1.5rem;
        padding: 4px 0;
        padding-left: 4px;
    }
</style>
<div class="jumbotron">
    <div class="row">
        <div class="col-md-1 col-xs">
            <h3 align="center" style="margin-bottom:2px">DASHBOARD</h3>
            <div class="specialLine"></div>
        </div>

    </div>
    <div class="row">
        <hr />
    </div>

    <div class="row" style="padding-top:10px">
        @Html.LabelFor(m => m.Project, new { @class = "col-md-2" })
        @Html.DropDownListFor(model => model.Project, TempData["ProjectList"] as SelectList, "--Select Project--", new { @class = "textbox-control col-md-3 col-xs" })
        @Html.LabelFor(m => m.Tower, new { @class = "col-md-2" })
        @Html.DropDownListFor(model => model.Tower, new SelectList(" "), "--Select Tower--", new { @class = "textbox-control col-md-3 col-xs" })
    </div>
    <div class="row">
        <br />
        <div class="col-md-7 no-pad">
            <button type="submit" id="submitbtn" value="New" class="btn btn-default orangebg pull-right"><i class="fa fa-book"></i>SHOW FLAT STATUS</button>
        </div>
    </div>
    @*<br />
    <br />*@

    <div id="labels" class="row" style="display:none">
        
        <div class="col-md-3">
            <div style="background:linear-gradient(to bottom,ForestGreen, white)" class="seat"><label for="4C"> OPEN </label> </div>
        </div>
        <div class="col-md-3">


            @*<div style="background:linear-gradient(to bottom,#BD4F6C, white)" class="seat"><label for="4C"> SOLD </label> </div>*@
            <div style="background-color: #bd4f6c;background-image:linear-gradient(326deg, #bd4f6c 0%, #d7816a 74%);" class="seat"><label for="4C"> SOLD </label> </div>
        </div>
        <div class="col-md-3">
            <div style="background:linear-gradient(to bottom,#7AD7F0, white)" class="seat"><label for="4C"> MORTGAGE </label> </div>
        </div>
        <div class="col-md-3">
            <div style="background:linear-gradient(to bottom,#FFD700, white)" class="seat"><label for="4C"> PENDING </label> </div>
        </div>
    </div>

    <br />
    <div class="row">
        <div class="col-md-8" style="padding-left:250px">

            <br />
            <br />
            <div id="bookingstatus"></div>

        </div>
    </div>
</div>

<script>
    $("#Project").change(function () {
        $.get("/Booking/GetTowers", { ProjectId: $("#Project").val() }, function (data) {
            $("#Tower").empty();
            $("#Tower").append("<option value='" + 0 + "'>" + "--Select Tower--" + "</option>")

            $.each(data, function (index, row) {
                $("#Tower").append("<option value='" + row.TowerID + "'>" + row.TowerName + "</option>")
            });
        });
    });
    var FloorNo;
    var html = '';
    $("#submitbtn").click(function () {
        $.get("/Booking/GetAllFlats", { TowerId: $("#Tower").val() }, function (data) {
            $.each(data, function (index, row) {


                if (index == 0) {
                    FloorNo = row.Floor;
                    html = '<div class="cinema-seats left"> <div class="cinema-row row-1">';
                }
                if (FloorNo != row.Floor) {
                    FloorNo = row.Floor;
                    html = html + '</div>'
                    html = html + '<div class="cinema-row row-' + row.Floor + '">';
                }
                
                if (row.BookingStatus == 'O') {
                    html = html + '<div style="background:linear-gradient(to bottom,ForestGreen, white)" class="seat"><label for="4C"> ' + row.FlatName + '</label> </div>';
                }
                if (row.BookingStatus == 'S') {
                    html = html + '<div style="background-color: #bd4f6c;background-image:linear-gradient(326deg, #bd4f6c 0%, #d7816a 74%);" class="seat"><label for="4C"> ' + row.FlatName + '</label> </div>';
                }
                if (row.BookingStatus == 'M') {
                    html = html + '<div style="background:linear-gradient(to bottom,#7AD7F0, white)"  class="seat"><label for="4C"> ' + row.FlatName + '</label> </div>';
                }
                if (row.BookingStatus == 'P') {
                    html = html + '<div style="background:linear-gradient(to bottom,#FFD700, white)"  class="seat"><label for="4C"> ' + row.FlatName + '</label> </div>';
                }
                //html = html + '<div class="seat"><label for="4C"> ' + row.FlatName + '</label> </div>';
                //if (index == 1) {
                //    var html = '<div class="cinema-seats left"> <div class="cinema-row row-1"> <div class="seat"><label for="4C"> 101</label></div><div class="seat"> <label for="4C"> 102</label></div><div style="background:linear-gradient(to bottom,ForestGreen, white);" class="seat"> <label for="4C"> 103</label> </div><div class="seat"><label for="4C"> 104</label></div><div class="seat"><label for="4C"> 105</label></div><div style="background:linear-gradient(to bottom,yellow, white);" class="seat"><label for="4C"> 106</label></div></div>'
                //    $('#bookingstatus').html(html);
                //}


            });
            $('#bookingstatus').html(html);
            $('#labels').show();
        });
    });

</script>
