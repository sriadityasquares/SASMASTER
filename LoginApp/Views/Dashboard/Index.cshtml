@model ModelLayer.Dashboard
@{
    ViewBag.Dashboard = "active";
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>

    .theatre {
        display: flex;
        position: absolute;
        top: 70%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .cinema-seats {
        display: flex;
    }

        .cinema-seats .seat {
            cursor: pointer;
        }

            .cinema-seats .seat:hover:before {
                content: '';
                position: absolute;
                top: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                border-radius: 7px;
            }

            .cinema-seats .seat.active:before {
                content: '';
                position: absolute;
                top: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 255, 255, 0.6);
                border-radius: 7px;
            }

    .left .cinema-row {
        transform: skew(-15deg);
        margin: 0 6px;
    }

    .left .seat {
        width: 35px;
        height: 50px;
        border-radius: 7px;
        background: linear-gradient(to top, #761818, #761818, #761818, #761818, #761818, #B54041, #F3686A);
        margin-bottom: 10px;
        transform: skew(20deg);
        margin-top: -32px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    }

    .left .row-2 {
        transform: skew(-13deg);
    }

        .left .row-2 .seat {
            transform: skew(18deg);
        }

    .left .row-3 {
        transform: skew(-12deg);
    }

        .left .row-3 .seat {
            transform: skew(16deg);
        }

    .left .row-4 {
        transform: skew(-11deg);
    }

        .left .row-4 .seat {
            transform: skew(15deg);
        }

    .left .row-5 {
        transform: skew(-10deg);
    }

        .left .row-5 .seat {
            transform: skew(12deg);
        }

    .left .row-6 {
        transform: skew(-9deg);
    }

        .left .row-6 .seat {
            transform: skew(10deg);
        }

    .left .row-7 {
        transform: skew(-8deg);
    }

        .left .row-7 .seat {
            transform: skew(8deg);
        }

    .left .row-8 {
        transform: skew(-7deg);
    }

        .left .row-8 .seat {
            transform: skew(6deg);
        }

    .left .row-9 {
        transform: skew(-6deg);
    }

        .left .row-9 .seat {
            transform: skew(4deg);
        }

    .left .row-10 {
        transform: skew(-5deg);
    }

        .left .row-10 .seat {
            transform: skew(2deg);
        }

    .right {
        margin-left: 70px;
    }

        .right .cinema-row {
            transform: skew(7deg);
            margin: 0 6px;
        }

        .right .seat {
            width: 35px;
            height: 50px;
            border-radius: 7px;
            background: linear-gradient(to top, #761818, #761818, #761818, #761818, #761818, #B54041, #F3686A);
            margin-bottom: 10px;
            transform: skew(-8deg);
            margin-top: -32px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .right .row-2 {
            transform: skew(9deg);
        }

            .right .row-2 .seat {
                transform: skew(-10deg);
            }

        .right .row-3 {
            transform: skew(10deg);
        }

            .right .row-3 .seat {
                transform: skew(-12deg);
            }

        .right .row-4 {
            transform: skew(11deg);
        }

            .right .row-4 .seat {
                transform: skew(-15deg);
            }

        .right .row-5 {
            transform: skew(12deg);
        }

            .right .row-5 .seat {
                transform: skew(-16deg);
            }

        .right .row-6 {
            transform: skew(13deg);
        }

            .right .row-6 .seat {
                transform: skew(-18deg);
            }

        .right .row-7 {
            transform: skew(15deg);
        }

            .right .row-7 .seat {
                transform: skew(-20deg);
            }

    .seat label {
        display: block;
        position: relative;
        width: 25%;
        text-align: center;
        font-size: 14px;
        font-weight: bold;
        line-height: 1.5rem;
        padding: 4px 0;
        padding-left: 4px;
    }

    [data-tooltip] {
        position: relative;
        z-index: 2;
        cursor: pointer;
    }

        /* Hide the tooltip content by default */
        [data-tooltip]:before,
        [data-tooltip]:after {
            visibility: hidden;
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
            filter: progid: DXImageTransform.Microsoft.Alpha(Opacity=0);
            opacity: 0;
            pointer-events: none;
        }

        /* Position tooltip above the element */
        [data-tooltip]:before {
            position: absolute;
            bottom: 150%;
            left: 50%;
            margin-bottom: 5px;
            margin-left: -80px;
            padding: 7px;
            width: 160px;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
            background-color: #000;
            background-color: hsla(0, 0%, 20%, 0.9);
            color: #fff;
            content: attr(data-tooltip);
            text-align: center;
            font-size: 14px;
            line-height: 1.2;
        }

        /* Triangle hack to make tooltip look like a speech bubble */
        [data-tooltip]:after {
            position: absolute;
            bottom: 150%;
            left: 50%;
            margin-left: -5px;
            width: 0;
            border-top: 5px solid #000;
            border-top: 5px solid hsla(0, 0%, 20%, 0.9);
            border-right: 5px solid transparent;
            border-left: 5px solid transparent;
            content: " ";
            font-size: 0;
            line-height: 0;
        }

        /* Show tooltip content on hover */
        [data-tooltip]:hover:before,
        [data-tooltip]:hover:after {
            visibility: visible;
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
            filter: progid: DXImageTransform.Microsoft.Alpha(Opacity=100);
            opacity: 1;
        }
</style>
<div class="jumbotron">
    <div class="row">
        <div class="col-md-1 col-xs">
            <h3 align="center" style="margin-bottom:2px">DASHBOARD</h3>
            <div class="specialLine"></div>
        </div>

    </div>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Modal title</h4>

                </div>
                <div class="modal-body">...</div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    @*<button id="myBtn" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">Launch demo modal</button>*@
    <div class="row">
        <hr />
    </div>

    <div class="row" style="padding-top:10px">
        @Html.LabelFor(m => m.Project, new { @class = "col-md-2" })
        @Html.DropDownListFor(model => model.Project, TempData["ProjectList"] as SelectList, "--Select Project--", new { @class = "textbox-control col-md-3 col-xs" })
        @Html.LabelFor(m => m.Tower, new { @class = "col-md-2" })
        @Html.DropDownListFor(model => model.Tower, new SelectList(" "), "--Select Tower--", new { @class = "textbox-control col-md-3 col-xs" })
    </div>
    @*<div class="row">
            <br />
            <div class="col-md-7 no-pad">
                <button type="submit" id="submitbtn" value="New" class="btn btn-default orangebg pull-right"><i class="fa fa-book"></i>SHOW FLAT STATUS</button>
            </div>
        </div>*@
    <br />
    <br />

    <div id="labels" class="row" style="display:none">
        <br />
        <div class="col-md-3">
            <div style="background:linear-gradient(to bottom,ForestGreen, white)" class="seat"><label for="4C"> OPEN </label> </div>
        </div>
        <div class="col-md-3">


            @*<div style="background:linear-gradient(to bottom,#BD4F6C, white)" class="seat"><label for="4C"> SOLD </label> </div>*@
            <div style="background-color: #bd4f6c;background-image:linear-gradient(326deg, #bd4f6c 0%, #d7816a 74%);" class="seat"><label for="4C"> SOLD </label> </div>
        </div>
        <div class="col-md-3">
            <div style="background:linear-gradient(to bottom,#7AD7F0, white)" class="seat"><label for="4C"> MORTGAGE </label> </div>
        </div>
        <div class="col-md-3">
            <div style="background:linear-gradient(to bottom,#FFD700, white)" class="seat"><label for="4C"> PENDING </label> </div>
        </div>
    </div>

    <br />
    <div class="row">
        <div class="col-md-8" style="padding-left:250px">

            <br />
            <br />
            <div id="bookingstatus"></div>

        </div>
    </div>
</div>

<script>
   $(document).ready(function () {
      
    //$("#myBtn").click(function(){
    //     $('#myModal').modal('show');
    //});
});
    $("#Project").change(function () {
        $.get("/Booking/GetTowers", { ProjectId: $("#Project").val() }, function (data) {
            $("#Tower").empty();
            $("#Tower").append("<option value='" + 0 + "'>" + "--Select Tower--" + "</option>")

            $.each(data, function (index, row) {
                $("#Tower").append("<option value='" + row.TowerID + "'>" + row.TowerName + "</option>")
            });
        });
    });
    var FloorNo;
    var html = '';
    //var Facing;
    //var Sqft;
    //var Bhk;
    $("#Tower").change(function () {
        $.get("/Booking/GetAllFlats", { TowerId: $("#Tower").val() }, function (data) {
            $.each(data, function (index, row) {

                if (index == 0) {
                    FloorNo = row.Floor;
                    html = '<div class="cinema-seats left"> <div class="cinema-row row-1">';

                }


                if (index == 0) {
                    FloorNo = row.Floor;
                    html = '<div class="cinema-seats left"> <div class="cinema-row row-1">';
                }
                if (FloorNo != row.Floor) {
                    FloorNo = row.Floor;
                    html = html + '</div>'
                    html = html + '<div class="cinema-row row-' + row.Floor + '">';
                }
                //var Facing = row.Facing;
                //var Sqft = row.Sft;
                //var Bhk = row.Bhk;
                //alert(row.Facing);
                if (row.BookingStatus == 'O') {

                    html = html + '<div style="background:linear-gradient(to bottom,ForestGreen, white)" onclick="ShowBookingScreen('+row.FlatID+')"  class="seat"><label for="4C"> ' + row.FlatName + '</label> </div>';
                }
                if (row.BookingStatus == 'S') {
                    html = html + '<div style="background-color: #bd4f6c;background-image:linear-gradient(326deg, #bd4f6c 0%, #d7816a 74%);" onclick="ShowFlatDetails(\'' + row.Facing + '\',' + row.Sft + ',' + row.Bhk + ',' + row.FlatName + ')" class="seat"><label for="4C"> ' + row.FlatName + '</label> </div>';
                }
                if (row.BookingStatus == 'M') {
                    html = html + '<div style="background:linear-gradient(to bottom,#7AD7F0, white);"  onclick="ShowFlatDetails(\'' + row.Facing + '\',' + row.Sft + ',' + row.Bhk + ',' + row.FlatName + ')" class="seat"><label for="4C"> ' + row.FlatName + '</label> </div>';
                }
                if (row.BookingStatus == 'P') {
                    html = html + '<div style="background:linear-gradient(to bottom,#FFD700, white);" onclick="ShowFlatDetails(\'' + row.Facing + '\',' + row.Sft + ',' + row.Bhk + ',' + row.FlatName + ')" class="seat"><label for="4C"> ' + row.FlatName + '</label> </div>';
                }
                //html = html + '<div class="seat"><label for="4C"> ' + row.FlatName + '</label> </div>';
                //if (index == 1) {
                //    var html = '<div class="cinema-seats left"> <div class="cinema-row row-1"> <div class="seat"><label for="4C"> 101</label></div><div class="seat"> <label for="4C"> 102</label></div><div style="background:linear-gradient(to bottom,ForestGreen, white);" class="seat"> <label for="4C"> 103</label> </div><div class="seat"><label for="4C"> 104</label></div><div class="seat"><label for="4C"> 105</label></div><div style="background:linear-gradient(to bottom,yellow, white);" class="seat"><label for="4C"> 106</label></div></div>'
                //    $('#bookingstatus').html(html);
                //}


            });
            $('#bookingstatus').html(html);
            $('#labels').show();
        });
    });

    function ShowBookingScreen(FlatID) {
        window.location.href ="/Booking/New?ProjectID=" + $("#Project").val() + "&TowerID=" +  $("#Tower").val()+ "&FlatID=" + FlatID;
    }

    function ShowFlatDetails(Facing, Sft, Bhk, Flat) {
        //swal({
        //    buttons: ["Book"],
        //});
        //        swal("Flat Info!", 'Flat No : ' + Flat + '\n' + 'Facing : ' + Facing + '\n' + 'Sqft : ' + Sft + '\n' + 'BHK :' + Bhk, "success",{
        //  button: {
        //    text: "Hey ho!",
        //  },
        //});
        //swal({
        //    text: 'Flat No : ' + Flat + '\n' + 'Facing : ' + Facing + '\n' + 'Sqft : ' + Sft + '\n' + 'BHK :' + Bhk,
        //    buttons: ["Select Patient?", "Speed Case?"],
        //});
        //        Swal.fire(
        //  'Good job!',
        //  'You clicked the button!',
        //  'success'
        //)
        //swal({
        //    title: "Flat Info",
        //    text: 'Flat No : ' + Flat + '\n' + 'Facing : ' + Facing + '\n' + 'Sqft : ' + Sft + '\n' + 'BHK :' + Bhk,
        //    //type: "info",
        //    //showCancelButton: true,
        //    confirmButtonColor: 'ForestGreen',
        //    confirmButtonText: 'Book!',
        //    cancelButtonText: "Cancel!",
        //    closeOnConfirm: false,
        //    closeOnCancel: false
        //})
        //$.toastr({
        //    heading: 'Positioning',
        //    text: 'Use the predefined ones, or specify a custom object',
        //    position: 'middle-center',
        //    stack: false,
        //    hideAfter: false
        //})

        //int Project = parseInt($("#Project").val())
        @*//window.location.href = '@Url.Action("New", "Booking",new { ProjectID = Project, TowerID =})';*@


     @*$.ajax({
                    type: "GET",
                    url: '@Url.Action("New", "Booking")',
         contentType: "application/json; charset=utf-8",
         data: {
             ProjectID: $("#Project").val(), TowerID : $("#Tower").val(),FlatID : 205},
                    dataType: "json",
                    success: function (cities) {

                    }
                });*@


        window.location.href ="/Booking/New?ProjectID=" + $("#Project").val() + "&TowerID=" +  $("#Tower").val()+ "&FlatID=" + 535;

        toastr.options = {
            //"closeButton": true,
            "debug": false,
            "newestOnTop": false,
            "progressBar": true,
            "positionClass": "toast-top-center",
            "preventDuplicates": true,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": 0,
            "extendedTimeOut": 0,
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut",
            "tapToDismiss": false
        }

        toastr.success('', "Clear itself?<br /><br /><button type='button' class='btn'>Book</button>");

    };

</script>
<script>
    $(document).ready(function () {
        $('[data-toggle="popover"]').popover();
    });



</script>